applications:
    frontend:
        source:
            root: /
        type: php:8.3
        
        # 1. Install Node.js to build the React frontend
        dependencies:
            nodejs:
                version: "20"
                
        # 2. Build the React app (npm run build)
        hooks:
            build: |
                set -e
                npm install
                npm run build
                
        # 3. Serve the "dist" folder (where React builds to)
        #    But allow PHP to run the script inside /api
        web:
            locations:
                "/":
                    root: "dist"
                    passthru: "/index.html"
                    index:
                        - "index.html"
                    allow: true
                    expires: 1h