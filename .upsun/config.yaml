applications:
    frontend:
        source:
            root: /
        type: php:8.3
        
        # We removed the "dependencies" block because Node.js is already included!
        
        hooks:
            build: |
                set -e
                # This installs your project dependencies
                npm install
                # This builds the React app
                npm run build
                
        web:
            locations:
                "/":
                    # Serve the files from the build folder
                    root: "dist"
                    # Pass all unknown requests to index.html (for React Router)
                    passthru: "/index.html"
                    index:
                        - "index.html"
                    allow: true
                    expires: 1h